<div
  class="control-panel glass-panel p-3 md:p-4 space-y-3 md:space-y-4 text-white rounded-xl max-w-md mx-auto"
>
  <div
    class="flex items-center justify-between mb-4 md:mb-6 border-b border-neon-pink/30 pb-2 flex-nowrap gap-2"
  >
    <h2 class="text-base font-bold neon-text tracking-widest whitespace-nowrap">System Controls</h2>
    <div class="text-[10px] font-mono text-neon-pink/50 animate-pulse whitespace-nowrap">
      STATUS: ACTIVE
    </div>
  </div>

  <!-- Ratio Selector -->
  <div class="space-y-2 mb-4 md:mb-6 p-3 md:p-4 border border-neon-pink/10 bg-neon-pink/5">
    <div class="flex justify-between items-center mb-1 md:mb-2">
      <span class="text-[8px] md:text-[10px] font-mono text-neon-pink uppercase tracking-widest"
        >Aspect Ratio</span
      >
      <span class="text-[8px] md:text-[10px] font-mono text-white opacity-40 uppercase">{{
        simService.currentAspectRatio()
      }}</span>
    </div>
    <select
      (change)="updateAspectRatio($event)"
      class="w-full bg-space-black border border-neon-pink/30 text-white text-[9px] md:text-[10px] font-mono uppercase tracking-widest p-1.5 md:p-2 outline-none focus:border-neon-pink transition-colors"
    >
      @for (key of ratioKeys; track key) {
      <option [value]="key" [selected]="key === simService.currentAspectRatio()">
        {{ aspectRatios[key].label }}
      </option>
      }
    </select>
  </div>

  <!-- Sliders -->
  @for (control of controlNames; track control) {
  <div class="space-y-1 md:space-y-2 group">
    <label
      class="block text-[10px] md:text-xs font-bold uppercase tracking-tighter flex justify-between group-hover:text-neon-pink transition-colors"
    >
      <span class="flex items-center gap-1">
        {{ controlConfig[control].label }}
        <span class="tooltip-container relative inline-block">
          <svg
            class="w-[18px] h-[18px] text-neon-pink/70 hover:text-neon-pink cursor-help"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <!-- Circle with thinner stroke -->
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="1"
              d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
            ></path>
            <!-- Question mark with bold stroke -->
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01"
            ></path>
          </svg>
          <span
            class="tooltip-text absolute left-0 bottom-full mb-2 w-64 p-4 bg-space-black/95 border border-neon-pink/30 text-[13px] text-white/90 font-normal normal-case tracking-normal leading-relaxed z-50 opacity-0 invisible transition-all duration-200"
          >
            {{ controlConfig[control].description }}
          </span>
        </span>
      </span>
      <span class="font-mono text-neon-pink">
        {{ getControlValue(control).toFixed(controlConfig[control].precision) }}
      </span>
    </label>
    <div class="relative h-5 md:h-6 flex items-center">
      <input
        type="range"
        [min]="controlConfig[control].min"
        [max]="controlConfig[control].max"
        [step]="controlConfig[control].step"
        [value]="getControlValue(control)"
        (input)="updateControl(control, $event)"
        class="futuristic-slider w-full"
      />
    </div>
  </div>
  }

  <!-- Video Recording Button -->
  <div class="pt-2 md:pt-4">
    <button
      (click)="toggleRecording()"
      [disabled]="simService.recordingState() === 'processing' || !simService.isImageLoaded()"
      [class]="buttonClass"
      class="w-full py-3 md:py-4 text-xs md:text-sm font-bold uppercase tracking-widest rounded-none border border-neon-pink/50 transition-all duration-300 shadow-[0_0_15px_rgba(255,45,149,0.1)] hover:shadow-[0_0_25px_rgba(255,45,149,0.3)]"
    >
      {{ buttonText }}
    </button>
  </div>

  <div
    class="text-[8px] md:text-[9px] font-mono text-center text-neon-pink/40 uppercase tracking-widest mt-2 md:mt-4"
  >
    Encryption: AES-256 | Protocol: Starfield-v2.0
  </div>
</div>
